
---

## README for Jenkins and Docker with GitHub Webhook Integration

### Prerequisites

1. **Install Docker with Jenkins Container**  
   Run the following command to start a Jenkins container:
   ```bash
   docker run -d \
     --name jenkinsDocker \
     -v /var/run/docker.sock:/var/run/docker.sock \
     -v jenkins_home:/var/jenkins_home \
     -p 8080:8080 \
     -p 50000:50000 \
     -v $(which docker):/usr/bin/docker \
     jenkins/jenkins:lts
   ```
   If Docker is not installed, refer to the [Docker installation guide](https://docs.docker.com/get-docker/).

2. **Open Jenkins**  
   Access Jenkins by navigating to [http://localhost:8080/](http://localhost:8080/).

3. **Install Required Plugins in Jenkins**  
   - **Git Plugin**: For cloning GitHub repositories.
   - **Docker Plugin**: For Docker integration.
   - **GitHub Integration Plugin**: For webhook integration.

---

### Steps to Configure the Jenkins Job

1. **Create a New Freestyle Job**
   - Open the Jenkins dashboard.
   - Click on **"New Item"**, enter a name, select **"Freestyle project"**, and click **"OK"**.

2. **Configure the Source Code Management**
   - Select **Git**.
   - Enter the repository URL (e.g., `https://github.com/HebaAli48/simplePortofolio.git`).
   - Provide credentials if the repository is private.

3. **Add Build Trigger**
   - Go to the **"Build Triggers"** section.
   - Select **"GitHub hook trigger for GITScm polling"**.

4. **Add DockerHub Credentials**
   - In the **"Build Environment"** section, select **"Use secret text(s) or file(s)"**.
   - Add the DockerHub username and password credentials by following these steps:
     - Open Jenkins dashboard, click **"Manage Jenkins"**, then **"Manage Credentials"**.
     - Select the appropriate domain or **"(global)"**.
     - Click **"Add Credentials"**.
     - Set **Kind** to **"Username with password"**.
     - Enter **Username** (e.g., `hebaali4`), **Password** (DockerHub password or access token).
     - Set **ID** (e.g., `dockerhub-credentials`) and **Description**.
     - Save the credentials.
   - **Reference the credentials in the build step as follows:**

In the "Build Environment" section, select "Use secret text(s) or file(s)".
Add the DockerHub username as USERNAME and password as PASSWORD credentials and select the Specific credentials which set above in same point.

5. **Add Build Steps**
   - Scroll to the **"Build"** section and add an **"Execute Shell"** step.
   - Paste the following commands:
     ```bash
     docker --version
     docker build -t hebaali4/portfolio .
     docker login -u $USERNAME -p $PASSWORD
     docker push hebaali4/portfolio
     ```

6. **Save the Job**  
   Click **"Save"** to finalize the job configuration.

---

### Configure GitHub Webhook

1. **Go to Your GitHub Repository Settings**
   - Navigate to **Settings > Webhooks**.

2. **Add a New Webhook**
   - Click **"Add webhook"**.
   - In the **"Payload URL"**, enter the ngrok URL followed by `/github-webhook/`. For example:
     ```
     http://<ngrok-generated-url>/github-webhook/
     ```
   - Set the **Content type** to `application/json`.
   - Choose **"Just the push event"** under "Which events would you like to trigger this webhook?".
   - Click **"Add webhook"**.

---

### Using Ngrok for Public Access

1. **Install Ngrok**  
   If Ngrok is not installed, download and install it from the [Ngrok website](https://dashboard.ngrok.com/get-started/setup/linux).

2. **Expose Jenkins to the Internet**
   - Start Ngrok on port 8080 (default Jenkins port):
     ```bash
     ngrok http 8080
     ```
   - Copy the generated public URL (e.g., `http://<ngrok-generated-url>`).

3. **Update Webhook with Ngrok URL**  
   Replace `<ngrok-generated-url>` in the webhook configuration with the URL generated by Ngrok.

---

### Testing the Setup

1. Push a new commit to the GitHub repository.
2. Verify that the Jenkins job starts automatically and builds the Docker image.
3. Check the Jenkins console logs to confirm the Docker image was pushed to your repository.

---

